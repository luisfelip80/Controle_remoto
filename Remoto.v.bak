module Remoto (comando,comparador,clk,entrada,led);
	output reg [7:0] comando;
	output reg [7:0]comparador;
	input clk;
	input entrada;
	output reg led;
	reg [7:0]cont;
	reg [7:0]etapa;
	reg enable,reset,b,enableO;
	reg [7:0]bitSgnal;
	wire [24:0]tempoWire;
	wire [7:0]copia1;
	reg [7:0]copia2;
	reg [24:0]tempo;
	initial begin
		led = 0;
		etapa = 0;
		enable = 0;
		comando =0;
		cont = 0;
		reset = 0;
		b = 0;
		bitSgnal = 0;
	end
	up_counter G2(.out(tempoWire),.enable(enable),.clk(clk),.reset(reset));
	orgBits G1(.ordem(bitSgnal),.b(b),.out(copia1),.in(copia2),.clk(clk),.enable(enableO));

	always@(posedge clk)begin
		
		if(entrada==0 && etapa==0)begin
			etapa <= 1;
			enable<= 1;
			reset <=0;
			tempo <= 0;
		end
		if(entrada==1 && etapa == 1)begin
			if (tempoWire > 23000)begin
				if(led==1)begin
					led<=0;
				end
				else begin
					led<=1;
				end
			end
			etapa <=2;
		end
		if(etapa == 2)begin
			if(tempoWire > 15000000)begin
				etapa <= 0;
				enable<= 0;
				reset <=1;
			end
		end
	end	
endmodule
